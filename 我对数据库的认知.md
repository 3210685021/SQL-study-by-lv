#一、什么是数据库？
##数据库管理系统
数据库管理系统（database- management system，dbms）由一个互相关联的数据的集合和一组用以访问这些数据的程序组成，这个数据集合通常被称为**数据库**，其中包含了关于某个企业的信息。设计数据库系统的目的是管理大量信息，对数据的管理既涉及信息存储结构的定义，又涉及信息信息操作机制的提供。此外，数据库系统还必须提供所存储信息的安全性保证，即使在系统崩溃或有人企图越权访问时也应保障信息的安全性。如果数据被多用户共享，那么系统还必须设法避免可能产生的异常结果。
##数据库系统应用
应用系统最主要的方面不是执行某些运算的程序，而是数据本身。
###数据库系统用于管理如下的数据集合：	
1、具有很高价值的数据集合；
2、相对庞大的数据集合；
3、常常同时被多个用户和应用系统访问的数据集合。

当今的数据库系统充分利用数据结构中的公共特征以获取高效性，同时也允许弱化结构化的数据和格式非常易变的数据。
###  代表性的应用：
#### 1、企业信息
	销售、会计、人力资源……
#### 2、生产制造
#### 3、银行和金融
	银行业、信用卡交易、金融业……
#### 4、大学
#### 5、航空业
#### 6、电信业
#### 7、基于web的服务
	社交媒体、在线零售、在线广告宣传……
#### 8、文档数据库
#### 9、导航系统
### 使用数据库的方式
#### 1、联机事务处理（online transaction processing）
大量的用户使用数据库，每个用户检索相对少量的数据，进行小的更新。这是数据库应用系统的绝大多数用户的主要使用方式。
#### 2、支持数据分析（data analytics）
审阅数据，给出结论，并推导出规则或决策程序，以用于驱动业务决策。首先，数据分析技术尝试从数据中自动地发现规则和模式并创建预测模型（predictive model），这些模型以个体的属性（“特征”）作为输入，以诸如归还贷款或点击广告的可能性作为输出，然后使用这些模型来做出业务决策。数据挖掘（data mining）领域将人工智能研究者和统计分析员所创造的知识发现技术与使之能被用于超大规模数据库的高效的实现技术结合起来。
### 文件处理系统（file- processing system）
被传统的操作系统所支持，系统将永久记录存储在多个不同的文件中，需要有不同的应用程序来将记录从有关文件中取出或加入适当的文件中。
**在文件处理系统中存储组织机构的信息的主要弊端：**
#### 1、数据的冗余和不一致性（data redundancy and inconsistency）
#### 2、数据访问困难（difficulty in accessing data）
#### 3、数据孤立（data isolation）
#### 4、完整性问题（integrity problem）
#### 5、原子性问题（atomicity problem）
#### 6、并发访问异常（concurrent- access anomaly）
#### 7、安全性问题（security problem）
## 数据视图
数据库系统是一些相互关联的数据以及一组使得用户可以访问和修改这些数据的程序的集合。数据库系统的一个主要目的是给用户提供数据的抽象视图，也就是说，系统隐藏关于数据数据存储和维护的某些细节。
###数据模型
**数据库结构的基础是数据模型（data model）**，一个描述数据、数据联系、数据语义以及一致性约束的概念工具的集合。
**数据模型可分为四类：**
#### 1、关系模型（relational model）
关系模型用表的集合来表示数据和数据间的关系。每个表有多个列，每列有唯一的名。表也称作**关系**。每个表包含某种特定类型的记录，每个记录定义了固定数目的字段或属性，表的列对应于记录类型的属性。
#### 2、实体-联系模型（entity- relationship model）
实体-联系模型使用称作实体的基本对象的集合，以及这些对象间的联系。实体是现实世界中可区别于其他对象的一件“事情”或一个“实体”。实体-联系模型被广泛用于数据库设计。
#### 3、半结构化数据模型（semi- structured data model）
半结构化数据模型允许在其数据定义中某些相同类型的数据项含有不同的属性集。json和可扩展标记语言（eXtensible Markup Language，XML）被广泛地用来表示半结构化数据。
#### 4、基于对象的数据模型（object- based data model）
##数据抽象（data abstraction）
一个可用的系统必须能高效地检索数据。系统开发人员通过几个层次的数据抽象来对用户屏蔽复杂性，以简化用户与系统的交互。数据库系统使得应用开发人员能够使用数据模型的抽象来存储和检索数据，并且将抽象操作转换为在底层实现上的操作。
#### 1、物理层（physical level）
最低层次的抽象，描述数据实际上是怎样存储的，物理层描述复杂的底层数据结构。数据库使用一种称为**索引**的数据结构来支持对记录的高效检索，这些也是物理层的构成成分。
#### 2、逻辑层（logical level）
比物理层层次稍高的抽象，描述数据库中存储什么数据以及这些数据之间存在什么联系。**物理数据独立性（physical data independence）**应用程序如果不依赖于物理模式，即使物理模式改变了它们也无需重写，它们就被称为具有物理数据独立性。数据库管理员使用抽象的逻辑层，他必须确定数据库中应该保存哪些信息。
#### 3、视图层（view level）
最高层次的抽象，它只描述整个数据库的某个部分，系统可以为同一个数据库提供多个视图。同时，视图也提供了防止用户访问数据库某些部分的安全性机制，比如一个学生不应该看到老师的薪资水平。
###实例和模式
特定时刻存储在数据库中的信息的集合称作数据库的一个**实例（instance）**，而数据库的总体设计称作**数据库模式（schema）**。数据库模式对应于程序中的变量声明（以及与之关联的类型的定义），每个变量在特定的时刻会出现特定的值，程序中变量在某一时刻的值对应于数据库模式的一个实例。按不同的抽象层次划分，数据库系统有几种模式，**物理模式（physical schema）**在物理层描述数据库的设计，而**逻辑模式（logical schema）**则在逻辑层描述数据库的设计。数据库在视图层也可以有几种模式，有时候称为**子模式（subschema）**，它描述了数据库的不同视图。
## 数据库语言
数据库系统提高数据定义语言来定义数据库模式，并提供数据操纵语言来表达数据库的查询和更新。实际上，数据定义和数据操纵语言并不是两种相互分离的语言，相反地，它们仅仅是构成了单一的数据库语言（例如SQL语言）的不同部分，几乎所有的关系数据库系统都使用SQL语言。
### 数据定义语言（data- definition language，DDL）
数据库模式是通过一系列定义来说明的，这些定义由一种被称作数据定义语言的特定语言来表达，DDL也可用于定义数据的其他特征。通过一系列特定的DDL语句来说明数据库系统所采用的存储结构和访问方式，这种特定的DDL称作**数据存储和定义（data storage and definition）**，这些语句定义了数据库模式的实现细节。存储在数据库中的某些数据值必须满足某些一致性约束，通常，约束可以是关于数据库的任意谓词，然而这样的测试代价非常高昂，因此数据库系统仅实现可以以最小代价测试的完整性约束。
#### 域约束（domain constraint）
每个属性都必须对应于一个所有可能的取值构成的域。完整性约束的最基本形式。
#### 引用完整性（referential integrity）
我们希望能确保一个关系中给定属性集上的取值也在另一关系的某一属性集的取值中出现（引用完整性）。数据库的修改有可能会导致引用完整性的破坏，当引用完整性约束被违反时，通常的处理是拒绝执行完整性被破坏的操作。
#### 授权（authorization）
读权限；插入权限；更新权限；删除权限。**数据字典**包含**元数据（metadata）**，元数据是关于数据的数据，可以将数据字典看作一种特殊的表，这种表只能由数据库系统本身（不是常规的用户）来访问和修改，在读取和修改实际的数据前，数据库系统首先要参考数据字典。
### 数据操纵语言（data- manipulation language，DML）
数据操纵语言是这样一种语言，它使得用户可以访问或操纵哪些按照某种适当的数据模型组织起来的数据，有以下访问类型：对存储在数据库中的信息进行检索；从数据库中删除信息；向数据库中插入新的信息；修改数据库中存储的信息。数据操纵语言基本可以分为两类，过程化的DML要求用户指定需要什么数据以及如何获得这些数据；声明式的DML也称为非过程化的DML只要求用户指定需要什么数据而不必指定如何获得这些数据。**查询（query）**是要求对信息进行检索的语句，DML中涉及信息检索的部分称作查询语言，SQL查询语言是非过程化的。
### 从应用程序访问数据库
SQL不支持诸如从用户那输入、输出到显示器或在网络上通信这样的动作，这样的计算和动作必须用一种**宿主（host）**语言来写，比如c/c++、Java或python，在其中使用嵌入式的SQL查询来访问数据库中的数据，**应用程序（application program）**就是用来以这种方式与数据库进行交互的程序。为了访问数据库，需要将DML语句从宿主发送到执行这些语句的数据库，最通用的办法是使用应用程序接口（过程集合），它可以用来将DML和DDL的语句发送给数据库，再取回结果。**开放数据库连接（ODBC）标准**定义了用于c语言和其他几种语言的应用程序接口，**Java数据库连接（JDBC）标准**为Java语言提供了相应的接口。
## 数据库引擎
数据库系统被划分为多个模块，每个模块完成整个系统的一个功能。数据库系统的功能部件大致可分为存储管理器（数据库常常需要大量存储空间）、查询处理器部件（帮助数据库系统简化和促进了对数据的访问）和事务管理部件（使得应用开发人员能够把一系列数据存取操作当做一个单元来看待，这些存取操作要么全做，要么全不做）。传统上数据库引擎是集中式的计算机系统，而当今的并发处理是高效管理海量数据的关键，现代的数据库引擎非常注重并发数据存储和并发查询处理。
### 存储管理器（storage manager）
存储管理器是数据库系统中负责在数据库中存储的低层数据与应用程序以及向系统提交的查询之间提供接口的部件，存储管理器负责与文件管理器进行交互，原始数据通过操作系统提供的文件系统存储在磁盘上，存储管理器将各种DML语句翻译为底层文件系统命令，因此，存储管理器负责数据库中数据的存储、检索和更新。存储管理器部件包括：权限及完整性管理器；事务管理器；文件管理器；缓冲区管理器；数据文件；数据字典；索引。
### 查询处理器
查询处理器部件主要包括：DDL解释器（DDL interpreter）、DML编译器（DML compiler）、查询执行引擎（query evaluation engine）。一个查询通常可被翻译成给出相同结果的多个候选执行计划中的任何一个，DML编译器还进行**查询优化**即从几个候选执行计划中选择代价最小的那个执行计划。
###  事务管理
**事务（transaction）**是数据库应用中完成单一逻辑功能的操作集合。通常对数据库的几个操作合起来形成一个逻辑单元，有三点要求：原子性，一致性，持久性。**事务管理器（transaction manager）**主要包括恢复管理器、并发控制管理器两个部分。
